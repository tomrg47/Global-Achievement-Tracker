{% from "components/button.html" import button %}
{% from "components/link.html" import link %}

{% macro header(brand_text="App", show_nav=true, nav_items=[], show_auth=true, user=None) %}
<header class="header">
  <div class="header__container">
    <div class="header__brand">
      <a href="/" class="header__logo">{{ brand_text }}</a>
    </div>
    
    {% if show_nav and nav_items %}
    <nav class="header__nav">
      {% for item in nav_items %}
      <a href="{{ item.url }}" class="header__nav-link {% if item.active %}header__nav-link--active{% endif %}">
        {{ item.text }}
      </a>
      {% endfor %}
    </nav>
    {% endif %}
    
    {% if show_auth %}
    <div class="header__actions">
      {% if user and user.is_authenticated %}
        <a href="{{ url_for('auth.account') }}" style="color: var(--color-primary-text); margin-right: 1rem; font-size: 0.875rem; text-decoration: none; font-weight: 500; display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 24px; height: 24px; background-color: var(--color-primary-500); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: white;">
                {{ user.username[0].upper() }}
            </div>
            {{ user.username }}
        </a>
        {{ link("Logout", href=url_for('auth.logout'), type="ghost-light", size="sm", rounded=true) }}
      {% else %}
        {{ link("Sign In", href="/login", type="ghost-light", size="sm", rounded=true) }}
        {{ link("Sign Up", href="/signup", type="primary", size="sm", rounded=true) }}
      {% endif %}
    </div>
    {% endif %}
  </div>
</header>
{% endmacro %}
